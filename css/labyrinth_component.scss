@import 'variables';
@import 'mixins';

[id*='labyrinth'] {
    .avatar {
        width: 143px;
    }

    .labyrinth,
    .map,
    .image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;

        .player {
            width: 35px;
            height: 35px;

            &::before {
                display: block;
                position: absolute;
                top: -100%;
                left: -100%;
                background-image: url('#{$sprite}sprites.charac.png');
                background-repeat: no-repeat;
                background-position: 0% 0%;
                background-size: 100% auto;
                width: 300%;
                height: 300%;
                content: '';
            }
        }

        .interactive-item {
            position: absolute;
            width: 10px;
            height: 10px;
        }
    }

    .d-pad {
        position: absolute;
        top: 320px;
        left: 720px;
        width: 220px;
        height: 144px;

        div {
            position: absolute;
            background-image: url('#{$image}arrow.keys.png');
            background-size: auto 200%;
            width: 72px;
            height: 72px;

            $left-position: 145 219 145  72;
            $top-position:    0  70  70  72;
            $lefts:          72   0  72 144;
            $tops:            0  72  72  72;

            @for $i from 1 through 4 {
                &:nth-of-type(#{$i}) {
                    top: #{nth($tops, $i)}px;
                    left: #{nth($lefts, $i)}px;
                    background-position: #{nth($left-position, $i)}px #{nth($top-position, $i)}px;
                }
            }
        }
    }

    .labyrinth-frame {
        position: absolute;
        top: 0;
        left: 0;
        background: rgba(84, 194, 242, .7); //scss-lint:disable ColorVariable
        width: 100%;
        height: 100%;
    }

    .reveal {
        position: absolute;
        top: 0;
        left: 0;
        transition: opacity .5s, z-index 0s .5s;
        width: 960px;
        height: 540px;

        &.OPEN {
            transition: opacity .5s, z-index 0s;
            z-index: 1;
        }

        ul {
            position: absolute;
            margin: 0;
            width: 960px;
            height: 540px;
        }

        li {
            display: none;
            transition: display 0s 1s;

            &.OPEN {
                display: block;
            }
        }

        .close-reveal {
            position: absolute;
            right: 1%;
            bottom: 2%;
            transition: opacity 4s display 4s;
            z-index: 3;
            background-position: -665px -43px;
            width: 80px;
            height: 50px;

            &:hover {
                background-position: -667px -187px;
            }
        }

        &.open-instructions .close-reveal {
            position: absolute;
            top: 0;
            left: 0;
            background: none;
            width: 100%;
            height: 100%;
        }
    }
}

#labyrinth-outdoors {
    .labyrinth {
        .interactive-item {
            $item-lefts:                662  262   86   86  400  638;
            $item-tops:                 119  313  322  458  455  414;
            $background-lefts:          -19 -134 -234 -376 -504 -619;
            $background-tops:            -6   -6   -6   -6   -6   -6;
            $complete-background-lefts: -19 -134 -234 -376 -504 -619;
            $complete-background-tops: -146 -146 -146 -146 -146 -146;

            &::before {
                position: absolute;
                background-image: url('#{$sprite}sprites.map1.png');
                background-repeat: no-repeat;
                background-size: auto 230%;
                content: '';
            }

            &[class*='item-']::before {
                top: -760%;
                left: -450%;
                width: 1000%;
                height: 1260%;
            }

            &.item-3::before {
                left: -650%;
                width: 1400%;
            }

            @for $i from 1 through 6 {
                &.item-#{$i} {
                    top: #{nth($item-tops, $i)}px;
                    left: #{nth($item-lefts, $i)}px;

                    &::before {
                        background-position: #{nth($background-lefts, $i)}px #{nth($background-tops, $i)}px;
                    }

                    &.COMPLETE::before {
                        opacity: .75;
                        background-position: #{nth($complete-background-lefts, $i)}px #{nth($complete-background-tops, $i)}px;
                    }
                }
            }
        }
    }

    .labyrinth-frame {
        &.instructions {
            .wolf {
                position: absolute;
                bottom: 0;
                left: 0;
                width: 20%;
            }

            .header {
                @include text-stroke(2, $color-black);
                position: absolute;
                top: 4%;
                left: 50%;
                transform: translateX(-50%);
                width: 70%;
                color: $color-yellow;
                font-size: 50px;
                font-weight: 900;
            }

            .sub-header {
                position: absolute;
                top: 48%;
                left: 50%;
                transform: translateX(-50%);
                width: 70%;
                font-size: 25px;
            }

            .nav-arrows {
                position: absolute;
                top: 65%;
                left: 50%;
                transform: translateX(-50%);
                width: 20%;
            }
        }

        &.tip {
            .bush-left {
                position: absolute;
                bottom: 0;
                left: -5%;
                width: 40%;
            }

            .bush-right {
                position: absolute;
                right: -20%;
                bottom: -20%;
                width: 40%;
            }

            .grass {
                position: absolute;
                bottom: 0;
                left: 0;
                width: 100%;
            }

            .wolf {
                position: absolute;
                bottom: 0;
                left: 7%;
                width: 20%;
            }

            .sign {
                position: absolute;
                left: 30%;
                width: 60%;
            }

            .content {
                position: absolute;
                top: 7px;
                left: 343px;
                background: url('#{$sprite}sprites-signs.png');
                background-size: auto 101%;
                width: 460px;
                height: 476px;
            }
        }

        &.tips .content {
            background-position: -3px -1px;
        }

        &.level-up .content {
            background-position: -3858px -5px;
        }

        $background-lefts: -492 -974 -1452 -1947 -2420 -2898 -3376;
        $background-tops:    -1   -1    -1   -12    -2    -4    -2;

        @for $i from 1 through 7 {
            &.item-#{$i} .content {
                background-position: #{nth($background-lefts, $i)}px #{nth($background-tops, $i)}px;
            }
        }
    }
}

#labyrinth-indoors {
    .labyrinth {
        .player {
            transform: scaleX(-1);
        }

        .interactive-item {
            $item-lefts:                780  710  557  426  385  280  295  635;
            $item-tops:                 321  170  130  135  455  210  120  305;
            $background-lefts:          -20 -270 -380 -657 -525 -780 -912 -146;
            $background-tops:             0    0    0    0    0   -2    0    0;
            $complete-background-lefts: -20 -270 -380 -657 -525 -780 -912 -146;
            $complete-background-tops:  -90  -90  -90  -90  -90  -95  -90  -90;

            &::before {
                position: absolute;
                background-image: url('#{$sprite}sprites.houseitems.png');
                background-repeat: no-repeat;
                background-size: auto 200%;
                content: '';
            }

            &[class*='item-']::before {
                top: -400%;
                left: -400%;
                width: 900%;
                height: 900%;
            }

            &.item-3::before {
                left: -600%;
                width: 1300%;
            }

            @for $i from 1 through 8 {
                &.item-#{$i} {
                    top: #{nth($item-tops, $i)}px;
                    left: #{nth($item-lefts, $i)}px;

                    &::before {
                        background-position: #{nth($background-lefts, $i)}px #{nth($background-tops, $i)}px;
                    }

                    &.COMPLETE::before {
                        background-position: #{nth($complete-background-lefts, $i)}px #{nth($complete-background-tops, $i)}px;
                    }
                }
            }
        }
    }

    .labyrinth-frame {
        &.instructions {
            .wolf {
                position: absolute;
                bottom: 2%;
                left: 50%;
                transform: translateX(-50%);
                width: 10%;
            }

            .header {
                @include text-stroke(2, $color-black);
                position: absolute;
                top: 15%;
                left: 50%;
                transform: translateX(-50%);
                width: 80%;
                color: $color-yellow;
                font-size: 50px;
                font-weight: 900;
            }

            .sub-header {
                position: absolute;
                top: 52%;
                left: 50%;
                transform: translateX(-50%);
                width: 70%;
                font-size: 30px;
            }
        }

        &.tip {
            .house {
                position: absolute;
                bottom: 0;
                left: -23%;
                width: 55%;
            }

            .bush-right {
                position: absolute;
                right: 0;
                bottom: 0;
                width: 40%;
            }

            .grass {
                position: absolute;
                bottom: 0;
                left: 0;
                width: 100%;
            }

            .wolf {
                position: absolute;
                bottom: 0;
                left: 5%;
                width: 20%;
            }

            .sign {
                position: absolute;
                left: 25%;
                width: 60%;
            }

            .content {
                position: absolute;
                top: 7px;
                left: 295px;
                background: url('#{$sprite}sprites-signs.png');
                background-size: auto 101%;
                width: 460px;
                height: 476px;
            }
        }

        &.level-up .content {
            background-position: -8667px 0;
        }

        $background-lefts: -4818 -5776 -6260 -6738 -7229 -7725 -8195 -5302;
        $background-tops:     -7    -3     5   -10    -1    -2    -2    -2;

        @for $i from 1 through 8 {
            &.item-#{$i} .content {
                background-position: #{nth($background-lefts, $i)}px #{nth($background-tops, $i)}px;
            }
        }
    }
}
